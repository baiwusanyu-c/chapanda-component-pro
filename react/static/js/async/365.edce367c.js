"use strict";(self.webpackChunk_chapanda_component_pro_docs=self.webpackChunk_chapanda_component_pro_docs||[]).push([["365"],{9646:function(e,t,s){s.d(t,{bH:()=>I,vk:()=>Z,J0:()=>R,U:()=>j});var l=s(651),r=s(2379);s(9030);var n=s(7079),a=s(2590);function c(e){let{title:t,tooltip:s}=e,c=(0,r.useMemo)(()=>t?(0,l.jsxs)("h1",{className:"title-content",children:[(0,l.jsx)("div",{className:"title-bar"}),t,s?(0,l.jsx)(n.Z,{title:s,children:(0,l.jsx)(a.Z,{className:"title-icon"})}):(0,l.jsx)(l.Fragment,{})]}):(0,l.jsx)("div",{}),[t,s]);return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"cbd-table-layout-title",children:[c,(0,l.jsx)("div",{className:"operation",children:e.children})]})})}s(151);var i=s(9129),o=s(7499),d=s(9671),u=s(697),m=s(2118),x=s(3817),p=s(1661),b=s(7946);let j=(0,r.createContext)({expose:null,getFunc:null}),{RangePicker:h}=i.Z;function f(e){let{columns:t,onSubmit:s,onReset:n,canRender:a}=e,[c]=o.Z.useForm();function f(e,t,s){return e.map(e=>({...e,label:e[t],value:e[s]}))}let[v,k]=(0,r.useState)(t);(0,r.useEffect)(()=>{k(t)},[t]);let g=(0,r.useCallback)((e,t,s,l)=>{if(v){let r=v[t];"select"===r.searchType&&r.formComponentProps&&"multiple"===r.formComponentProps.mode&&r.searchEnum&&(e.includes("all")?(r.searchEnum=r.searchEnum.map(e=>(e[l]&&"all"!==e[l]&&(e.disabled=!0),e)),c.setFieldValue(s,["all"])):r.searchEnum=r.searchEnum.map(e=>(e.disabled=!1,e))),v[t]=r,k(()=>[...v])}},[v,c]),N=(0,r.useMemo)(()=>null==v?void 0:v.sort((e,t)=>(e.searchRenderIndex||0)-(t.searchRenderIndex||0)).map((e,t)=>{let{title:s,dataIndex:r,searchType:n,searchIndex:a,searchLabel:c,searchEnum:x=[],searchLabelKey:p="label",searchValueKey:b="value",formComponentProps:j}=e;if(n){let e=a||r,v=(0,l.jsx)(l.Fragment,{});if("input"===n&&(v=(0,l.jsx)(d.Z,{style:{width:200},autoComplete:"off",onPressEnter:S,...j})),"select"===n){let s=f(x,p,b);v=(0,l.jsx)(u.Z,{style:{width:200},fieldNames:{label:p,value:b,...(j||{}).fieldNames},onChange:s=>g(s,t,e,b),onKeyDown:S,options:s,...j})}if("radio"===n){let e=f(x,p,b);v=(0,l.jsx)(m.ZP.Group,{...j,options:e})}return"date-picker"===n&&(v=(0,l.jsx)(i.Z,{...j})),"range-picker"===n&&(v=(0,l.jsx)(h,{...j})),(0,l.jsx)(o.Z.Item,{className:"cbd-table-pro-form-filter--item",name:e,label:c||s,children:v},e)}}).filter(e=>!!e),[v,g]),[Z,y]=(0,r.useState)(!0),F=(0,r.useMemo)(()=>{let e={maxWidth:"none"};return Z&&(e={maxWidth:"none",overflowY:"hidden",height:"32px"}),e},[Z]);function S(e){"Enter"==`${e.key}`&&P()}function P(){c.validateFields().then(e=>{s&&s(e)})}function E(){t&&(null==t||t.forEach(e=>{let{dataIndex:t,searchType:s,searchIndex:l,defaultSearchValue:r}=e;s&&c.setFieldValue(l||t,r)}))}(0,r.useEffect)(()=>{E(),P()},[]);let[B,C]=(0,r.useState)(!1);(0,r.useEffect)(()=>{function e(){let e=document.querySelector(".cbd-table-pro-form-filter--form"),t=document.querySelectorAll(".cbd-table-pro-form-filter--item");if(e&&t&&t.length>0&&t.length){let e=!1,s=null;t.forEach(t=>{let l=t.getBoundingClientRect().top;null!==s&&l!==s&&(e=!0),s=l}),C(e)}}return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[Z]),(0,r.useEffect)(()=>{(null==N?void 0:N.length)?a(!0):a(!1)},[N]);let{expose:w}=(0,r.useContext)(j);function q(){return c.getFieldsValue()}return(0,r.useEffect)(()=>{if(w)return w("tablePro","getFormFilterParams",q),()=>w("tablePro","getFormFilterParams",null)},[w]),(0,l.jsx)(l.Fragment,{children:(null==N?void 0:N.length)?(0,l.jsxs)("div",{className:"cbd-table-pro-form-filter",children:[(0,l.jsxs)("div",{className:"filter-area",children:[(0,l.jsx)(o.Z,{className:"cbd-table-pro-form-filter--form",layout:"inline",form:c,style:F,children:N}),B?(0,l.jsx)(x.ZP,{type:"link",iconPosition:"end",onClick:function(){y(!Z)},icon:Z?(0,l.jsx)(p.Z,{}):(0,l.jsx)(b.Z,{}),children:Z?"展开":"收起"}):(0,l.jsx)(l.Fragment,{})]}),(0,l.jsxs)("div",{className:"operation-area",children:[(0,l.jsx)(x.ZP,{onClick:P,type:"primary",children:"搜索"}),(0,l.jsx)(x.ZP,{onClick:function(){E(),c.validateFields().then(e=>{n&&n(e)})},children:"重置"})]})]}):(0,l.jsx)(l.Fragment,{})})}var v=s(8286),k=s(6906);function g(e){let{searchTitle:t,tableTitle:s,columns:n,toolBarRender:a,request:i,params:o,dataSource:d}=e,[u,m]=(0,r.useState)(!1),[x,p]=(0,r.useState)({pageSize:10,current:1,total:0}),[b,h]=(0,r.useState)([]);async function g(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0,s=arguments.length>2?arguments[2]:void 0;if(i){let l={...o,...e},r=await i(l,s,t);h(r.data),p({...e,total:r.total||0}),N.current=!0}}(0,r.useEffect)(()=>{d&&!i&&h(d)},[d,i]);let N=(0,r.useRef)(!1);(0,r.useEffect)(()=>{N.current&&o&&g(x,Z,F)},[N,o]);let[Z,y]=(0,r.useState)({}),[F,S]=(0,r.useState)([]),{expose:P,getFunc:E}=(0,r.useContext)(j);function B(e){let t={...e};if(E){let e=E("tablePro");e&&e.getFormFilterParams&&(t={...t,...e.getFormFilterParams()})}return t}let C=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Z,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:F;g(B(e),t,s)},w=()=>({params:B(x),filters:Z,sorter:F});return(0,r.useEffect)(()=>{if(P)return P("tablePro","search",C),P("tablePro","getSearchParams",w),()=>{P("tablePro","search",null),P("tablePro","getSearchParams",null)}},[P,E,x]),(0,l.jsxs)(l.Fragment,{children:[t?(0,l.jsx)(c,{title:t.title,tooltip:t.tooltip},"title"):(0,l.jsx)(l.Fragment,{}),(0,l.jsx)(f,{onSubmit:function(e){let t={...x,...e,pageSize:10,current:1};p(t),g(t)},onReset:function(e){let t={...x,...e,pageSize:10,current:1};p(t),g(t)},canRender:function(e){m(e)},columns:n}),(t||u)&&(a||s)?(0,l.jsx)(v.Z,{}):(0,l.jsx)(l.Fragment,{}),(0,l.jsx)(c,{title:(s||{}).title,tooltip:(s||{}).tooltip,children:a&&a()},"operation"),(0,l.jsx)(k.Z,{...e,pagination:{...e.pagination,current:x.current,total:x.total,pageSize:x.pageSize},onChange:(e,t,s)=>{let l={...x,pageSize:e.pageSize,current:e.current};p(l),g(l,t,s),y(t),S(s)},columns:n,dataSource:b})]})}function N(e){let{searchTitle:t}=e;return(0,l.jsx)(l.Fragment,{children:t?(0,l.jsx)(c,{title:t.title,tooltip:t.tooltip}):(0,l.jsx)(l.Fragment,{})})}function Z(e){let{formType:t="form"}=e;return(0,l.jsx)("div",{className:"cbd-table-pro",children:"form"===t?(0,l.jsx)(g,{...e}):(0,l.jsx)(N,{...e})})}function y(e){let{renderNum:t=6}=e;return{list:(0,r.useMemo)(()=>Array.from({length:t}),[t])}}var F=s(8198),S=s(4799);function P(e){let{active:t=!0,renderNum:s=20,skeletonProps:r}=e,{list:n}=y({renderNum:s});return(0,l.jsxs)("div",{className:"cbd-skeleton-pro-query",children:[(0,l.jsx)(F.Z.Button,{active:t,block:!0,className:"cbd-skeleton-pro-query-title",...r}),(0,l.jsx)("div",{className:"cbd-skeleton-pro-query-form",children:(0,l.jsx)(S.Z,{size:[10,16],wrap:!0,children:n.map((e,s)=>(0,l.jsx)(F.Z.Input,{active:t,block:!0,className:"cbd-skeleton-pro-query-input",...r},`cbd-skeleton-pro-query${s}`))})}),(0,l.jsxs)("div",{className:"cbd-skeleton-pro-query-operate",children:[(0,l.jsx)(F.Z.Button,{active:t,block:!0,className:"cbd-skeleton-pro-query-item",...r}),(0,l.jsx)(F.Z.Button,{active:t,block:!0,className:"cbd-skeleton-pro-query-item",...r})]})]})}function E(e){let{active:t=!0,renderNum:s=10,renderTableRow:r=10,renderTableCol:n=4,skeletonProps:a,renderTableQuery:c=!0}=e,{list:i}=y({renderNum:r}),{list:o}=y({renderNum:n}),d=o.map((e,s)=>({title:(0,l.jsx)(F.Z.Button,{active:t,block:!0,...a}),render:()=>(0,l.jsx)(F.Z.Button,{active:t,block:!0,...a}),dataIndex:`SkeletonTable-${s}`,key:`SkeletonTable-${s}`})),u=i.map(()=>{let e={};return o.forEach((t,s)=>{e[`SkeletonTable-${s}`]="data-source"}),e});return(0,l.jsxs)(l.Fragment,{children:[c?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(P,{type:"query",renderNum:s,active:t,skeletonProps:a}),(0,l.jsx)(v.Z,{})]}):(0,l.jsx)(l.Fragment,{}),(0,l.jsxs)("div",{className:"cbd-skeleton-pro-table",children:[(0,l.jsxs)("div",{className:"cbd-skeleton-pro-table-operate",children:[(0,l.jsx)(F.Z.Button,{active:t,block:!0,className:"cbd-skeleton-pro-table-title",...a}),(0,l.jsxs)("div",{children:[(0,l.jsx)(F.Z.Button,{active:t,block:!0,className:"cbd-skeleton-pro-table-item",...a}),(0,l.jsx)(F.Z.Button,{active:t,block:!0,className:"cbd-skeleton-pro-table-item",...a})]})]}),(0,l.jsx)(k.Z,{columns:d,pagination:!1,dataSource:u}),(0,l.jsx)("div",{className:"cbd-skeleton-pro-table-page",children:(0,l.jsx)("div",{className:"cbd-skeleton-pro-table-pager",children:(0,l.jsx)(F.Z.Input,{active:t,block:!0,...a})})})]})]})}function B(e){let{active:t=!0,skeletonProps:s,renderTableQuery:r=!0,renderTableRow:n=10,renderTableCol:a=4,renderDetailTable:c=!0}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"cbd-skeleton-pro-detail",children:[(0,l.jsxs)("div",{className:"cbd-skeleton-pro-detail-item",children:[(0,l.jsx)(F.Z.Button,{active:t,...s}),(0,l.jsx)(F.Z,{active:t,...s})]}),(0,l.jsx)("div",{className:"cbd-skeleton-pro-detail-item",children:(0,l.jsx)(F.Z,{active:t,...s})})]}),(0,l.jsxs)("div",{className:"cbd-skeleton-pro-detail",children:[(0,l.jsxs)("div",{className:"cbd-skeleton-pro-detail-item",children:[(0,l.jsx)(F.Z.Button,{active:t,...s}),(0,l.jsx)(F.Z,{active:t,...s})]}),(0,l.jsx)("div",{className:"cbd-skeleton-pro-detail-item",children:(0,l.jsx)(F.Z,{active:t,paragraph:{rows:4},...s})})]}),c?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(v.Z,{}),(0,l.jsx)(E,{type:"table",renderTableQuery:r,renderTableRow:n,renderTableCol:a,skeletonProps:s,active:t})]}):(0,l.jsx)(l.Fragment,{})]})}function C(e){let{active:t=!0,renderNum:s=6,skeletonProps:r}=e,{list:n}=y({renderNum:s});return(0,l.jsx)(l.Fragment,{children:n.map((e,s)=>(0,l.jsxs)("div",{className:"cbd-skeleton-pro-description",children:[(0,l.jsxs)("div",{className:"cbd-skeleton-pro-description-body",children:[(0,l.jsx)(F.Z.Button,{active:t,className:"cbd-skeleton-pro-decr-title",...r}),(0,l.jsx)(F.Z.Button,{active:t,className:"cbd-skeleton-pro-decr-sub-title",...r})]}),(0,l.jsx)("div",{className:"cbd-skeleton-pro-description-right",children:(0,l.jsx)(F.Z.Button,{active:t,block:!1,className:"cbd-skeleton-pro-decr-extra",...r})})]},`cbd-skeleton-pro-description${s}`))})}function w(e){let{active:t=!0,renderNum:s=6,skeletonProps:r}=e,{list:n}=y({renderNum:s});return(0,l.jsx)(l.Fragment,{children:n.map((e,s)=>(0,l.jsxs)("div",{className:"cbd-skeleton-pro-list",children:[(0,l.jsx)(F.Z.Button,{active:t,block:!1,className:"cbd-skeleton-pro-item",...r}),(0,l.jsx)(F.Z.Input,{active:t,block:!1,className:"cbd-skeleton-pro-item",...r}),(0,l.jsx)(F.Z.Button,{active:t,block:!1,className:"cbd-skeleton-pro-item",...r})]},`cbd-skeleton-pro-list${s}`))})}s(2254);var q=s(805),z=s(4838),$=s(312);function _(e){let{active:t=!0,renderNum:s=6,skeletonProps:r,rowProps:n,colProps:a}=e,{list:c}=y({renderNum:s});return(0,l.jsx)(q.Z,{...n,className:"cbd-skeleton-pro-matrix",children:c.map((e,s)=>(0,l.jsx)(z.Z,{...a,children:(0,l.jsx)($.Z,{title:(0,l.jsx)(F.Z.Button,{className:"cbd-skeleton-pro-matrix-title",...r}),extra:null,className:"cbd-skeleton-pro-matrix-card",bordered:!1,children:(0,l.jsxs)("div",{className:"cbd-skeleton-pro-matrix-content",children:[(0,l.jsx)(F.Z.Button,{active:t,block:!0,className:"cbd-skeleton-pro-matrix-sub-title",...r}),(0,l.jsx)(F.Z.Button,{active:t,block:!0,className:"cbd-skeleton-pro-matrix-description",...r})]})})},`cbd-skeleton-pro-matrix${s}`))})}function I(e){let t=(0,r.useMemo)(()=>"list"===e.type?(0,l.jsx)(w,{...e}):"description"===e.type?(0,l.jsx)(C,{...e}):"matrix"===e.type?(0,l.jsx)(_,{...e}):"detail"===e.type?(0,l.jsx)(B,{...e}):"table"===e.type?(0,l.jsx)(E,{...e}):"query"===e.type?(0,l.jsx)(P,{...e}):void 0,[e]);return(0,l.jsx)("div",{className:"cbd-skeleton-pro",children:t})}s(2159);var M=s(4471);function R(e){let{isATag:t,attrs:s,title:n,titleIcon:a,extra:c,description:i,showExtra:o=!0,disabled:d=!1}=e,u=(0,r.useCallback)(e=>{let r=d?"is-disabled":"";return t?(0,l.jsx)("a",{className:`cbd-nav-card cbd-nav-card--a ${r}`,...s,children:e}):(0,l.jsx)("div",{className:`cbd-nav-card ${r}`,...s,children:e})},[t,s,d]),m=(0,r.useMemo)(()=>o?c&&"string"==typeof c?(0,l.jsx)(M.Z,{bordered:!1,className:"cbd-nav-card--extra",children:c}):c:(0,l.jsx)(l.Fragment,{}),[o,c]),x=(0,r.useMemo)(()=>a?"core-card":"core-card--not-title",[a]);return(0,l.jsx)(l.Fragment,{children:u((0,l.jsxs)($.Z,{title:a,extra:m,className:x,bordered:!1,children:[(0,l.jsx)("p",{className:"cbd-nav-card--title",children:n}),(0,l.jsx)("p",{className:"cbd-nav-card--description",children:i})]}))})}}}]);